[gd_scene load_steps=11 format=3 uid="uid://c5a22qec3ldqu"]

[ext_resource type="Script" uid="uid://bpc7yefwrvw2p" path="res://scripts/Playership.gd" id="1_g7dm1"]
[ext_resource type="Texture2D" uid="uid://bk8m6t2qym3bo" path="res://assets/playerShip3_blue.png" id="1_y8e4i"]
[ext_resource type="PackedScene" uid="uid://blb343re0vnrc" path="res://prefabs/Laser.tscn" id="2_ooph6"]
[ext_resource type="Script" uid="uid://dngehwlhumnrx" path="res://scripts/states/PlayerStateMachine.gd" id="4_8qe2m"]
[ext_resource type="Script" uid="uid://dh234gip04scv" path="res://scripts/states/PlayerActiveState.gd" id="5_q844g"]
[ext_resource type="Script" uid="uid://bsh07430lylwj" path="res://scripts/states/PlayerInvunerableState.gd" id="5_wd0a1"]
[ext_resource type="Script" uid="uid://sdj6i1mavgdw" path="res://scripts/states/PlayerDeadState.gd" id="7_myygw"]
[ext_resource type="Script" uid="uid://c2hpq8rkgj5g7" path="res://scripts/states/PlayerRespawningState.gd" id="8_lvgib"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_c2x5h"]

[sub_resource type="CircleShape2D" id="CircleShape2D_7d2qn"]
radius = 140.014

[node name="PlayerShip" type="RigidBody2D"]
z_index = 10
collision_mask = 2
physics_material_override = SubResource("PhysicsMaterial_c2x5h")
continuous_cd = 2
contact_monitor = true
max_contacts_reported = 1
linear_damp_mode = 1
linear_damp = 0.5
angular_damp_mode = 1
angular_damp = 1.0
script = ExtResource("1_g7dm1")
SPEED = 500.0
turnSpeed = 1250.0
lazer = ExtResource("2_ooph6")
invunerableModulate = Color(0.449359, 0.0992663, 0.795475, 1)

[node name="PlayerShip3Blue" type="Sprite2D" parent="."]
scale = Vector2(0.4, 0.4)
texture = ExtResource("1_y8e4i")

[node name="CollisionShape2D" type="CollisionPolygon2D" parent="."]
scale = Vector2(0.4, 0.4)
polygon = PackedVector2Array(9, -24, 4, -36, -4, -36, -10, -24, -49, 27, 49, 27)

[node name="ThrustMarker" type="Marker2D" parent="."]
position = Vector2(0, 16)
gizmo_extents = 5.0

[node name="ScreenWrapper" type="VisibleOnScreenNotifier2D" parent="."]

[node name="ShotMarker" type="Marker2D" parent="."]
position = Vector2(0, -16)

[node name="SpawnSafeArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2
input_pickable = false
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="SpawnSafeArea"]
shape = SubResource("CircleShape2D_7d2qn")

[node name="PlayerStateMachine" type="Node" parent="." node_paths=PackedStringArray("stateList")]
script = ExtResource("4_8qe2m")
stateList = {
1: NodePath("PlayerActiveState"),
2: NodePath("PlayerInvunerableState"),
3: NodePath("PlayerDeadState"),
4: NodePath("PlayerRespawnState")
}
metadata/_custom_type_script = "uid://dngehwlhumnrx"

[node name="PlayerInvunerableState" type="Node" parent="PlayerStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("5_wd0a1")
flashIntervalMin = 0.2
flashIntervalMax = 0.6
ThisState = 2
player = NodePath("../..")
metadata/_custom_type_script = "uid://bsh07430lylwj"

[node name="PlayerActiveState" type="Node" parent="PlayerStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("5_q844g")
ThisState = 1
player = NodePath("../..")
metadata/_custom_type_script = "uid://dh234gip04scv"

[node name="PlayerDeadState" type="Node" parent="PlayerStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("7_myygw")
ThisState = 3
player = NodePath("../..")
metadata/_custom_type_script = "uid://sdj6i1mavgdw"

[node name="PlayerRespawnState" type="Node" parent="PlayerStateMachine" node_paths=PackedStringArray("respawnSafeArea", "player")]
script = ExtResource("8_lvgib")
respawnSafeArea = NodePath("../../SpawnSafeArea")
ThisState = 4
player = NodePath("../..")
metadata/_custom_type_script = "uid://c2hpq8rkgj5g7"

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="screen_exited" from="ScreenWrapper" to="." method="_screenWrapperExited" flags=3]
